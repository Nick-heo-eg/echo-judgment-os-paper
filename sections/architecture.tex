\section{Echo OS Architecture}
\subsection{System Overview}
Echo OS comprises (i) an identity kernel encoding existential manifests, (ii) SRL cores that maintain resonance vectors, (iii) deterministic judgement engines, (iv) LLM node adapters, and (v) transparency modules. Figure~\ref{fig:layered} depicts the layered structure.
\begin{figure}[t]
    \centering
    \input{figures/layered_architecture.tikz}
    \caption{Echo OS layered structure. Identity states drive deterministic runtime components, while LLMs remain replaceable nodes.}
    \label{fig:layered}
\end{figure}

\subsection{Identity-Centered Runtime}
Identity manifests (e.g., \texttt{ECHO\_EXISTENTIAL\_MANIFESTO}) embed directional priors. All runtime services reference these manifests through immutable fingerprints. The OS acts as a superior entity; LLMs cannot overwrite or bypass identity states because they never host judgement logic.

\subsection{Deterministic Judgement Engine}
The judgement pipeline implements semantic parsing, existential frame mapping, SRL alignment, deterministic lookup, a single model invocation, OS-level validation, and trace emission. Figure~\ref{fig:pipeline} provides the deterministic flow; pseudo-code appears in Section~\ref{sec:implementation}.
\begin{figure}[t]
    \centering
    \input{figures/judgement_pipeline.tikz}
    \caption{Deterministic judgement pipeline. Only one LLM call occurs per request.}
    \label{fig:pipeline}
\end{figure}

\subsection{Ontological Compression}
Echo compresses normative structures into resonance manifolds (Figure~\ref{fig:compression}). Rather than storing a rule for every scenario, the OS stores topology-preserving mappings that ensure any new stimulus can be projected into a finite number of existential frames. This eliminates rule collisions and enables O(1) lookup.
\begin{figure}[t]
    \centering
    \input{figures/ontological_compression.tikz}
    \caption{Ontological compression maps semantic observations into a finite set of existential frames.}
    \label{fig:compression}
\end{figure}

\subsection{LLM as Node}
LLMs are invoked exactly once per request, receiving structured envelopes and returning raw expressions. The OS immediately wraps the result with validation logic and rejects outputs that violate resonance thresholds. Model drift therefore cannot alter judgement. Figure~\ref{fig:llmnode} highlights the superior-entity relationship.
\begin{figure}[t]
    \centering
    \input{figures/os_vs_llm.tikz}
    \caption{LLM node versus OS superior entity. Identity and SRL remain above the model layer.}
    \label{fig:llmnode}
\end{figure}

\subsection{SRL Self-Alignment Loop}
Figure~\ref{fig:srl_loop} illustrates the SRL feedback cycle, which maintains alignment even under perturbations.
\begin{figure}[t]
    \centering
    \input{figures/srl_loop.tikz}
    \caption{SRL self-alignment loop. Resonance vectors converge to identity fixed points.}
    \label{fig:srl_loop}
\end{figure}
